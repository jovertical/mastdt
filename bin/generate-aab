#!/usr/bin/node

const { exec } = require('child_process')
const pick = require('lodash/pick')

require('dotenv').config()

exec(
  `turtle build:android --keystore-path mastdt.jks --keystore-alias ${process.env.EXPO_ANDROID_KEYSTORE_ALIAS}`,
  {
    env: pick(process.env, [
      'EXPO_ANDROID_KEYSTORE_ALIAS',
      'EXPO_ANDROID_KEYSTORE_PASSWORD',
      'EXPO_ANDROID_KEY_PASSWORD',
      'EXPO_USERNAME',
      'EXPO_PASSWORD',
    ]),
  },
  (err, stdout, stderr) => {
    if (err) {
      return console.error(err)
    }

    console.log(`stdout: ${stdout}`)
    console.log(`stderr: ${stderr}`)
  },
)
